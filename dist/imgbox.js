!function(e){function t(a){if(i[a])return i[a].exports;var l=i[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=1)}([function(e,t,i){"use strict";t.a={name:"ElxImgbox",model:{prop:"images",event:"change"},props:{action:String,listUrl:String,multiple:{type:Boolean,default:!0},enableUpload:{type:Boolean,default:!0},limit:{type:Number,default:10},maxSize:{type:Number,default:2},withData:{type:Object,default:function(){}},withCredentials:{type:Boolean,default:!0},headers:{type:Object,default:function(){}},images:{type:Array,default:function(){return[]}},dialogActiveTab:{type:String,default:"pick"}},data:function(){return{isLoading:!0,dialogVisible:!1,theDialogActiveTab:this.dialogActiveTab,theImages:this.images,uploadSuccessCount:0,imgRes:{items:[],total:0}}},watch:{theImages:function(){this.$emit("change",this.theImages)}},methods:{onClickListImage:function(e){var t=this.selectedImageIndex(e);return t>=0?(e.selected=!1,void this.theImages.splice(t,1)):(this.multiple||(this.theImages=[],this.clearListSelected()),this.multiple&&this.theImages.length>=this.limit?void ELEMENT.Message.warning("最多只能选择"+this.limit+"张图片"):(e.selected=!0,void this.theImages.push(JSON.parse(JSON.stringify(e)))))},clearListSelected:function(e){for(var t=0;t<this.imgRes.items.length;t++)if(e){if(e.url===this.imgRes.items[t].url){this.imgRes.items[t].selected=!1;break}}else this.imgRes.items[t].selected&&(this.imgRes.items[t].selected=!1)},loadListImage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.listUrl)throw new Error("listUrl is required");this.isLoading=!0,axios.get(this.listUrl,{params:{page:t,ps:15,_r:Math.random()}}).then(function(t){var i=t.data;e.imgRes.total=parseInt(i.total);for(var a=[],l=0,o=0;o<i.items.length&&!(++l>15);o++){var s=i.items[o];s.thumb||(s.thumb=s.url),s.name||(s.name=s.url.substr(s.url.lastIndexOf("/")+1)),void 0===s.label&&(s.label=""),s.selected=e.selectedImageIndex(s)>-1,a.push(s)}e.imgRes.items=a,e.isLoading=!1})},selectedImageIndex:function(e){for(var t=0;t<this.theImages.length;t++){if(this.theImages[t].url===e.url)return t}return-1},onPageNumChange:function(e){this.loadListImage(e)},onUploadConfirm:function(){this.$refs.upload.submit()},onUploadProgress:function(e,t,i){},onUploadChange:function(e,t){},beforeUpload:function(e){var t="image/jpeg"===e.type,i="image/png"===e.type,a="image/gif"===e.type,l=e.size/1048576<this.maxSize;return t||i||a?!!l||(ELEMENT.Message.error(this.uploadSizeTip()),!1):(ELEMENT.Message.error(this.uploadTypeTip()),!1)},uploadNumberLimit:function(){return this.multiple?this.limit-this.theImages.length:1},uploadTypeTip:function(){return"仅支持 jpg/png/gif 图片"},uploadSizeTip:function(){return"大小不能超过 "+this.maxSize+"M"},uploadTips:function(){var e=[this.uploadTypeTip(),this.uploadSizeTip()];if(!this.multiple)return e.join("，");this.theImages.length>0&&e.push("已有"+this.theImages.length+"张图片");var t=this.$refs.upload?this.$refs.upload.uploadFiles.length:0;return t>0&&e.push("即将上传"+t+"张图片"),e.push("还可以选择"+(this.limit-this.theImages.length-t)+"张图片上传"),e.join("，")},onUploadError:function(e,t,i){throw ELEMENT.Message.info("服务器打了个盹^_^"),e},onUploadSuccess:function(e,t,i){this.multiple||(this.theImages=[]),this.theImages.push(e.item),this.uploadSuccessCount++,this.multiple&&i.length!==this.uploadSuccessCount||(this.dialogVisible=!1,this.uploadSuccessCount=0,this.$refs.upload.clearFiles())},onUploadExceedTip:function(){ELEMENT.Message.warning("当前最多只能选择"+this.uploadNumberLimit()+"张图片上传")},onRemove:function(e,t){this.theImages.splice(e,1),this.clearListSelected(t)}},mounted:function(){this.loadListImage()},computed:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(2);Vue.component(a.a.name,a.a)},function(e,t,i){"use strict";function a(e){i(3)}var l=i(0),o=i(9),s=i(8),n=a,r=s(l.a,o.a,!1,n,null,null);t.a=r.exports},function(e,t,i){var a=i(4);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(6)("25cee453",a,!0,{})},function(e,t,i){t=e.exports=i(5)(!1),t.push([e.i,'.elx-images .el-upload--picture-card,.elx-images .el-upload-list__item{width:78px;height:78px;line-height:82px;border-radius:5px}.elx-imgbox-dialog .el-badge{vertical-align:bottom}.elx-imgbox-dialog .el-dialog{width:720px}.elx-imgbox-dialog .el-dialog .el-dialog__header{border-bottom:1px solid #e8e8e8}.elx-imgbox-dialog .el-dialog .el-dialog__body{padding:0;background:#f6f6f6}.elx-imgbox-dialog .el-tabs .el-tabs__header{margin-right:0;margin-top:5px}.elx-imgbox-dialog .el-tabs .el-tabs__header .el-tabs__nav-wrap:after{background:#f6f6f6}.elx-imgbox-dialog .el-tabs .el-tabs__item.is-active{background:#fff}.elx-imgbox-dialog .el-tabs .el-tabs--left .el-tabs__nav-wrap{padding-top:15px}.elx-imgbox-dialog .el-tabs .el-tabs__content{height:560px;background:#fff}.elx-imgbox-dialog .elx-foot{padding:15px 0 0 10px}.elx-imgbox-dialog .elx-foot .el-button{margin:0 0 0 10px}.elx-imgbox-dialog .pick-block{position:relative}.elx-imgbox-dialog .pick-block .elx-img-list-loading{position:absolute;z-index:9;left:0;right:0;width:100%;height:450px;background:#fff;text-align:center}.elx-imgbox-dialog .pick-block .elx-img-list-loading .el-icon-loading{font-size:50px;color:#409eff;line-height:250px}.elx-imgbox-dialog .pick-block .elx-img-list{padding:10px;height:433px}.elx-imgbox-dialog .pick-block .elx-img-list .img-item{float:left;margin:10px;width:100px;cursor:pointer;position:relative;font-size:12px}.elx-imgbox-dialog .pick-block .elx-img-list .img-item img{width:100px;height:100px;display:block}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .title{line-height:24px;height:24px;display:block;overflow:hidden;background:#f6f6f6;padding:0 5px}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .label{position:absolute;z-index:9;left:0;bottom:24px;width:100%;height:21px;line-height:21px;text-align:center;color:#fff}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .label:after{content:" ";position:absolute;left:0;bottom:0;width:100%;height:21px;background:#000;opacity:.3;z-index:-1}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .selected{position:absolute;right:-3px;top:-3px;width:100%;height:100%;border:3px solid #409eff;border-radius:3px;text-align:right}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .selected .icon{background:#409eff;text-align:center;height:24px;width:24px;line-height:24px;display:inline-block;font-size:16px;color:#fff;border-radius:0 0 0 3px;position:absolute;right:0;top:0}.elx-imgbox-dialog .pick-block .elx-img-list:after{content:" ";display:table;height:0;clear:both;visibility:hidden}.elx-imgbox-dialog .pick-block .el-pagination{background:#f9f9f9;position:relative;padding:5px;margin:0 24px 0 20px;text-align:right;float:none}.elx-imgbox-dialog .pick-block .el-pagination *{background:none}.elx-imgbox-dialog .upload-block .upload-img-preview{padding:20px}.elx-imgbox-dialog .upload-block .upload-img-preview .el-upload--picture-card,.elx-imgbox-dialog .upload-block .upload-img-preview .el-upload-list--picture-card .el-upload-list__item,.elx-imgbox-dialog .upload-block .upload-img-preview .el-upload-list--picture-card .el-upload-list__item .wp{width:90px;height:90px;line-height:98px;background-size:cover;background-position:50% 50%}.elx-imgbox-dialog .upload-block .upload-img-preview .el-upload-list--picture-card .el-upload-list__item-status-label i{margin-top:12px;vertical-align:top}.elx-imgbox-dialog .upload-block .upload-tip{padding:0 20px;font-size:13px;color:#999}.elx-imgbox-dialog .upload-block .upload-title{font-size:16px;color:#666;padding:20px 0 0 20px}.el-upload-list__item-actions a i{color:#fff}',""])},function(e,t){function i(e,t){var i=e[1]||"",l=e[3];if(!l)return i;if(t&&"function"==typeof btoa){var o=a(l);return[i].concat(l.sources.map(function(e){return"/*# sourceURL="+l.sourceRoot+e+" */"})).concat([o]).join("\n")}return[i].join("\n")}function a(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var a=i(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},l=0;l<this.length;l++){var o=this[l][0];"number"==typeof o&&(a[o]=!0)}for(l=0;l<e.length;l++){var s=e[l];"number"==typeof s[0]&&a[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},function(e,t,i){function a(e){for(var t=0;t<e.length;t++){var i=e[t],a=p[i.id];if(a){a.refs++;for(var l=0;l<a.parts.length;l++)a.parts[l](i.parts[l]);for(;l<i.parts.length;l++)a.parts.push(o(i.parts[l]));a.parts.length>i.parts.length&&(a.parts.length=i.parts.length)}else{for(var s=[],l=0;l<i.parts.length;l++)s.push(o(i.parts[l]));p[i.id]={id:i.id,refs:1,parts:s}}}}function l(){var e=document.createElement("style");return e.type="text/css",c.appendChild(e),e}function o(e){var t,i,a=document.querySelector("style["+b+'~="'+e.id+'"]');if(a){if(m)return h;a.parentNode.removeChild(a)}if(x){var o=g++;a=u||(u=l()),t=s.bind(null,a,o,!1),i=s.bind(null,a,o,!0)}else a=l(),t=n.bind(null,a),i=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else i()}}function s(e,t,i,a){var l=i?"":a.css;if(e.styleSheet)e.styleSheet.cssText=v(t,l);else{var o=document.createTextNode(l),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function n(e,t){var i=t.css,a=t.media,l=t.sourceMap;if(a&&e.setAttribute("media",a),f.ssrId&&e.setAttribute(b,t.id),l&&(i+="\n/*# sourceURL="+l.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var d=i(7),p={},c=r&&(document.head||document.getElementsByTagName("head")[0]),u=null,g=0,m=!1,h=function(){},f=null,b="data-vue-ssr-id",x="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i,l){m=i,f=l||{};var o=d(e,t);return a(o),function(t){for(var i=[],l=0;l<o.length;l++){var s=o[l],n=p[s.id];n.refs--,i.push(n)}t?(o=d(e,t),a(o)):o=[];for(var l=0;l<i.length;l++){var n=i[l];if(0===n.refs){for(var r=0;r<n.parts.length;r++)n.parts[r]();delete p[n.id]}}}};var v=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t){for(var i=[],a={},l=0;l<t.length;l++){var o=t[l],s=o[0],n=o[1],r=o[2],d=o[3],p={id:e+":"+l,css:n,media:r,sourceMap:d};a[s]?a[s].parts.push(p):i.push(a[s]={id:s,parts:[p]})}return i}},function(e,t){e.exports=function(e,t,i,a,l,o){var s,n=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(s=e,n=e.default);var d="function"==typeof n?n.options:n;t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0),i&&(d.functional=!0),l&&(d._scopeId=l);var p;if(o?(p=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=p):a&&(p=a),p){var c=d.functional,u=c?d.render:d.beforeCreate;c?(d._injectStyles=p,d.render=function(e,t){return p.call(t),u(e,t)}):d.beforeCreate=u?[].concat(u,p):[p]}return{esModule:s,exports:n,options:d}}},function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"elx-imgbox"},[i("div",{staticClass:"elx-images"},[i("ul",{staticClass:"el-upload-list el-upload-list--picture-card"},e._l(e.theImages,function(t,a){return i("li",{key:a,staticClass:"el-upload-list__item",attrs:{tabindex:a}},[i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.thumb,alt:""}}),e._v(" "),i("span",{staticClass:"el-upload-list__item-actions"},[i("a",{staticClass:"el-upload-list__item-preview",attrs:{href:t.url,target:"_blank"}},[i("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),i("span",{staticClass:"el-upload-list__item-delete",on:{click:function(i){return e.onRemove(a,t)}}},[i("i",{staticClass:"el-icon-delete"})])])])}),0),e._v(" "),e.multiple&&e.theImages.length<e.limit||!e.multiple&&0==e.theImages.length?i("div",{staticClass:"el-upload el-upload--picture-card",attrs:{tabindex:"0"},on:{click:function(t){e.dialogVisible=!0}}},[i("i",{staticClass:"el-icon-plus"})]):e._e()]),e._v(" "),i("el-dialog",{staticClass:"elx-imgbox-dialog",attrs:{title:"图片管理器",visible:e.dialogVisible,top:"5vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.theDialogActiveTab,callback:function(t){e.theDialogActiveTab=t},expression:"theDialogActiveTab"}},[i("el-tab-pane",{staticClass:"pick-block",attrs:{label:"选择图片",name:"pick"}},[e.isLoading?i("div",{staticClass:"elx-img-list-loading"},[i("div",{staticClass:"el-icon-loading"})]):e._e(),e._v(" "),i("div",{staticClass:"elx-main elx-img-list"},e._l(e.imgRes.items,function(t,a){return i("div",{key:a,staticClass:"img-item",on:{click:function(i){return e.onClickListImage(t)}}},[i("div",{staticClass:"thumb-wp"},[i("img",{attrs:{src:t.thumb,alt:"img.name"}})]),e._v(" "),i("div",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),t.label?i("div",{staticClass:"label"},[e._v(e._s(t.label))]):e._e(),e._v(" "),t.selected?i("span",{staticClass:"selected"},[i("span",{staticClass:"icon el-icon-check"})]):e._e()])}),0),e._v(" "),i("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.imgRes.total},on:{"current-change":e.onPageNumChange}}),e._v(" "),i("div",{staticClass:"elx-foot"},[i("el-badge",{staticClass:"item",attrs:{value:e.theImages.length}},[i("el-button",{attrs:{type:"primary",size:"medium",disabled:0==e.theImages.length},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确定")])],1),e._v(" "),e.enableUpload?i("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(t){e.theDialogActiveTab="upload"}}},[e._v("上传图片")]):e._e()],1)],1),e._v(" "),e.enableUpload?i("el-tab-pane",{staticClass:"upload-block",attrs:{label:"上传图片",name:"upload"}},[i("div",{staticClass:"elx-main"},[i("div",{staticClass:"upload-title"},[e._v("请选择本地图片上传：")]),e._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-img-preview",attrs:{"list-type":"picture-card",accept:"image/*",headers:e.headers,"with-credentials":e.withCredentials,data:e.withData,action:e.action,"auto-upload":!1,multiple:e.multiple,limit:e.uploadNumberLimit(),"before-upload":e.beforeUpload,"on-change":e.onUploadChange,"on-progress":e.onUploadProgress,"on-success":e.onUploadSuccess,"on-error":e.onUploadError,"on-exceed":e.onUploadExceedTip}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("div",{staticClass:"upload-tip"},[e._v(e._s(e.uploadTips()))]),e._v(" "),i("div",{staticClass:"elx-foot"},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.onUploadConfirm}},[e._v("确定上传")])],1)],1)]):e._e()],1)],1)],1)},l=[],o={render:a,staticRenderFns:l};t.a=o}]);
//# sourceMappingURL=imgbox.js.map