!function(e){function t(o){if(i[o])return i[o].exports;var a=i[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,o){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){function i(e,t){var i=e[1]||"",a=e[3];if(!a)return i;if(t&&"function"==typeof btoa){var l=o(a);return[i].concat(a.sources.map(function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"})).concat([l]).join("\n")}return[i].join("\n")}function o(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var o=i(t,e);return t[2]?"@media "+t[2]+"{"+o+"}":o}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},a=0;a<this.length;a++){var l=this[a][0];"number"==typeof l&&(o[l]=!0)}for(a=0;a<e.length;a++){var s=e[a];"number"==typeof s[0]&&o[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},function(e,t,i){function o(e){for(var t=0;t<e.length;t++){var i=e[t],o=c[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(l(i.parts[a]));o.parts.length>i.parts.length&&(o.parts.length=i.parts.length)}else{for(var s=[],a=0;a<i.parts.length;a++)s.push(l(i.parts[a]));c[i.id]={id:i.id,refs:1,parts:s}}}}function a(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function l(e){var t,i,o=document.querySelector("style["+x+'~="'+e.id+'"]');if(o){if(m)return h;o.parentNode.removeChild(o)}if(b){var l=g++;o=u||(u=a()),t=s.bind(null,o,l,!1),i=s.bind(null,o,l,!0)}else o=a(),t=n.bind(null,o),i=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else i()}}function s(e,t,i,o){var a=i?"":o.css;if(e.styleSheet)e.styleSheet.cssText=v(t,a);else{var l=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(l,s[t]):e.appendChild(l)}}function n(e,t){var i=t.css,o=t.media,a=t.sourceMap;if(o&&e.setAttribute("media",o),f.ssrId&&e.setAttribute(x,t.id),a&&(i+="\n/*# sourceURL="+a.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var p=i(9),c={},d=r&&(document.head||document.getElementsByTagName("head")[0]),u=null,g=0,m=!1,h=function(){},f=null,x="data-vue-ssr-id",b="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i,a){m=i,f=a||{};var l=p(e,t);return o(l),function(t){for(var i=[],a=0;a<l.length;a++){var s=l[a],n=c[s.id];n.refs--,i.push(n)}t?(l=p(e,t),o(l)):l=[];for(var a=0;a<i.length;a++){var n=i[a];if(0===n.refs){for(var r=0;r<n.parts.length;r++)n.parts[r]();delete c[n.id]}}}};var v=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,i,o,a,l){var s,n=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(s=e,n=e.default);var p="function"==typeof n?n.options:n;t&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0),i&&(p.functional=!0),a&&(p._scopeId=a);var c;if(l?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},p._ssrRegister=c):o&&(c=o),c){var d=p.functional,u=d?p.render:p.beforeCreate;d?(p._injectStyles=c,p.render=function(e,t){return c.call(t),u(e,t)}):p.beforeCreate=u?[].concat(u,c):[c]}return{esModule:s,exports:n,options:p}}},function(e,t,i){"use strict";t.a={name:"ElxImgbox",model:{prop:"images",event:"change"},props:{action:String,listUrl:String,multiple:{type:Boolean,default:!0},enableUpload:{type:Boolean,default:!0},limit:{type:Number,default:10},maxSize:{type:Number,default:2},withData:{type:Object,default:function(){}},withCredentials:{type:Boolean,default:!0},headers:{type:Object,default:function(){}},images:{type:Array,default:function(){return[]}},activeTab:{type:String,default:"pick"}},data:function(){return{isLoading:!0,theImages:this.images,uploadSuccessCount:0,imgRes:{items:[],total:0}}},watch:{theImages:function(){this.$emit("change",this.theImages)}},methods:{onUpload:function(){var e=this;this.$elxImgbox({action:this.action,listUrl:this.listUrl,multiple:this.multiple,enableUpload:this.enableUpload,limit:this.limit,maxSize:this.maxSize,withData:this.withData,withCredentials:this.withCredentials,headers:this.headers,activeTab:this.activeTab,callback:function(t){e.theImages=t}},this.theImages)},onRemove:function(e,t){this.theImages.splice(e,1)}},mounted:function(){},computed:{}}},function(e,t,i){"use strict";t.a={name:"ElxImgbox",model:{prop:"images",event:"change"},data:function(){return{images:[],options:{listUrl:"",action:"",multiple:!0,withData:{},withCredentials:!0,headers:{},limit:10,maxSize:2,activeTab:"pick",enableUpload:!0,callback:null},isLoading:!0,visible:!1,uploadSuccessCount:0,imgRes:{items:[],total:0}}},methods:{setOptions:function(e){Object.assign(this.options,e),"upload"!==this.options.activeTab||this.options.enableUpload||(this.options.activeTab="pick")},show:function(){this.visible=!0},hide:function(){this.visible=!1},onConfirm:function(){this.hide(),"function"==typeof this.options.callback&&this.options.callback(this.images)},onClickListImage:function(e){var t=this.selectedImageIndex(e);return t>=0?(e.selected=!1,void this.images.splice(t,1)):(this.options.multiple||(this.images=[],this.clearListSelected()),this.options.multiple&&this.images.length>=this.options.limit?void ELEMENT.Message.warning("最多只能选择"+this.options.limit+"张图片"):(e.selected=!0,void this.images.push(JSON.parse(JSON.stringify(e)))))},clearListSelected:function(e){for(var t=0;t<this.imgRes.items.length;t++)if(e){if(e.url===this.imgRes.items[t].url){this.imgRes.items[t].selected=!1;break}}else this.imgRes.items[t].selected&&(this.imgRes.items[t].selected=!1)},loadListImage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.options.listUrl)throw new Error("listUrl is required");this.isLoading=!0,axios.get(this.options.listUrl,{params:{page:t,ps:15,_r:Math.random()}}).then(function(t){var i=t.data;e.imgRes.total=parseInt(i.total);for(var o=[],a=0,l=0;l<i.items.length&&!(++a>15);l++){var s=i.items[l];s.thumb||(s.thumb=s.url),s.name||(s.name=s.url.substr(s.url.lastIndexOf("/")+1)),void 0===s.label&&(s.label=""),s.selected=e.selectedImageIndex(s)>-1,o.push(s)}e.imgRes.items=o,e.isLoading=!1})},selectedImageIndex:function(e){for(var t=0;t<this.images.length;t++){if(this.images[t].url===e.url)return t}return-1},onPageNumChange:function(e){this.loadListImage(e)},onUploadConfirm:function(){this.$refs.upload.submit()},onUploadProgress:function(e,t,i){},onUploadChange:function(e,t){},beforeUpload:function(e){var t="image/jpeg"===e.type,i="image/png"===e.type,o="image/gif"===e.type,a=e.size/1048576<this.options.maxSize;return t||i||o?!!a||(ELEMENT.Message.error(this.uploadSizeTip()),!1):(ELEMENT.Message.error(this.uploadTypeTip()),!1)},uploadNumberLimit:function(){return this.options.multiple?this.options.limit-this.images.length:1},uploadTypeTip:function(){return"仅支持 jpg/png/gif 图片"},uploadSizeTip:function(){return"大小不能超过 "+this.options.maxSize+"M"},uploadTips:function(){var e=[this.uploadTypeTip(),this.uploadSizeTip()];if(!this.options.multiple)return e.join("，");this.images.length>0&&e.push("已有"+this.images.length+"张图片");var t=this.$refs.upload?this.$refs.upload.uploadFiles.length:0;return t>0&&e.push("即将上传"+t+"张图片"),e.push("还可以选择"+(this.options.limit-this.images.length-t)+"张图片上传"),e.join("，")},onUploadError:function(e,t,i){throw ELEMENT.Message.info("服务器打了个盹^_^"),e},onUploadSuccess:function(e,t,i){this.options.multiple||(this.images=[]),this.images.push(e.item),this.uploadSuccessCount++,this.options.multiple&&i.length!==this.uploadSuccessCount||(this.onConfirm(),this.uploadSuccessCount=0,this.$refs.upload.clearFiles())},onUploadExceedTip:function(){ELEMENT.Message.warning("当前最多只能选择"+this.uploadNumberLimit()+"张图片上传")},onRemove:function(e,t){this.images.splice(e,1),this.clearListSelected(t)}},mounted:function(){this.loadListImage()},computed:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(6),a=i(11);Vue.component(o.a.name,o.a),Vue.use(a.a),t.default=o.a},function(e,t,i){"use strict";function o(e){i(7)}var a=i(3),l=i(10),s=i(2),n=o,r=s(a.a,l.a,!1,n,null,null);t.a=r.exports},function(e,t,i){var o=i(8);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(1)("22104f44",o,!0,{})},function(e,t,i){t=e.exports=i(0)(!1),t.push([e.i,".elx-images{line-height:0}.elx-images .el-upload--picture-card,.elx-images .el-upload-list__item{width:78px;height:78px;line-height:82px;border-radius:5px}.elx-images .el-upload-list__item-actions a i{color:#fff}.single-img .el-upload-list--picture-card .el-upload-list__item{margin:0}",""])},function(e,t){e.exports=function(e,t){for(var i=[],o={},a=0;a<t.length;a++){var l=t[a],s=l[0],n=l[1],r=l[2],p=l[3],c={id:e+":"+a,css:n,media:r,sourceMap:p};o[s]?o[s].parts.push(c):i.push(o[s]={id:s,parts:[c]})}return i}},function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"elx-imgbox"+(e.multiple?"":" single-img")},[i("div",{staticClass:"elx-images"},[i("ul",{staticClass:"el-upload-list el-upload-list--picture-card"},e._l(e.theImages,function(t,o){return i("li",{key:o,staticClass:"el-upload-list__item",attrs:{tabindex:o}},[i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.thumb,alt:""}}),e._v(" "),i("span",{staticClass:"el-upload-list__item-actions"},[i("a",{staticClass:"el-upload-list__item-preview",attrs:{href:t.url,target:"_blank"}},[i("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),i("span",{staticClass:"el-upload-list__item-delete",on:{click:function(i){return e.onRemove(o,t)}}},[i("i",{staticClass:"el-icon-delete"})])])])}),0),e._v(" "),e.multiple&&e.theImages.length<e.limit||!e.multiple&&0==e.theImages.length?i("div",{staticClass:"el-upload el-upload--picture-card",attrs:{tabindex:"0"},on:{click:e.onUpload}},[i("i",{staticClass:"el-icon-plus"})]):e._e()])])},a=[],l={render:o,staticRenderFns:a};t.a=l},function(e,t,i){"use strict";var o=i(12),a={install:function(e){var t=e.extend(o.a);e.elxImgbox=e.prototype.$elxImgbox=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=new t;if(o.images=JSON.parse(JSON.stringify(i)),o.setOptions(e),!o.$el){var a=o.$mount();document.querySelector("body").appendChild(a.$el)}return o.show(),o}}};t.a=a},function(e,t,i){"use strict";function o(e){i(13)}var a=i(4),l=i(15),s=i(2),n=o,r=s(a.a,l.a,!1,n,null,null);t.a=r.exports},function(e,t,i){var o=i(14);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(1)("71205eae",o,!0,{})},function(e,t,i){t=e.exports=i(0)(!1),t.push([e.i,'.elx-images .el-upload--picture-card,.elx-images .el-upload-list__item{width:78px;height:78px;line-height:82px;border-radius:5px}.elx-imgbox-dialog .el-badge{vertical-align:bottom}.elx-imgbox-dialog .el-dialog{width:720px}.elx-imgbox-dialog .el-dialog .el-dialog__header{border-bottom:1px solid #e8e8e8}.elx-imgbox-dialog .el-dialog .el-dialog__body{padding:0;background:#f6f6f6}.elx-imgbox-dialog .el-tabs .el-tabs__header{margin-right:0;margin-top:5px}.elx-imgbox-dialog .el-tabs .el-tabs__header .el-tabs__nav-wrap:after{background:#f6f6f6}.elx-imgbox-dialog .el-tabs .el-tabs__item.is-active{background:#fff}.elx-imgbox-dialog .el-tabs .el-tabs--left .el-tabs__nav-wrap{padding-top:15px}.elx-imgbox-dialog .el-tabs .el-tabs__content{height:560px;background:#fff}.elx-imgbox-dialog .elx-foot{padding:15px 0 0 10px}.elx-imgbox-dialog .elx-foot .el-button{margin:0 0 0 10px}.elx-imgbox-dialog .pick-block{position:relative}.elx-imgbox-dialog .pick-block .elx-img-list-loading{position:absolute;z-index:9;left:0;right:0;width:100%;height:450px;background:#fff;text-align:center}.elx-imgbox-dialog .pick-block .elx-img-list-loading .el-icon-loading{font-size:50px;color:#409eff;line-height:250px}.elx-imgbox-dialog .pick-block .elx-img-list{padding:10px;height:433px}.elx-imgbox-dialog .pick-block .elx-img-list .img-item{float:left;margin:10px;width:100px;cursor:pointer;position:relative;font-size:12px}.elx-imgbox-dialog .pick-block .elx-img-list .img-item img{width:100px;height:100px;display:block}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .title{line-height:24px;height:24px;display:block;overflow:hidden;background:#f6f6f6;padding:0 5px}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .label{position:absolute;z-index:9;left:0;bottom:24px;width:100%;height:21px;line-height:21px;text-align:center;color:#fff}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .label:after{content:" ";position:absolute;left:0;bottom:0;width:100%;height:21px;background:#000;opacity:.3;z-index:-1}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .selected{position:absolute;right:-3px;top:-3px;width:100%;height:100%;border:3px solid #409eff;border-radius:3px;text-align:right}.elx-imgbox-dialog .pick-block .elx-img-list .img-item .selected .icon{background:#409eff;text-align:center;height:24px;width:24px;line-height:24px;display:inline-block;font-size:16px;color:#fff;border-radius:0 0 0 3px;position:absolute;right:0;top:0}.elx-imgbox-dialog .pick-block .elx-img-list:after{content:" ";display:table;height:0;clear:both;visibility:hidden}.elx-imgbox-dialog .pick-block .el-pagination{background:#f9f9f9;position:relative;padding:5px;margin:0 24px 0 20px;text-align:right;float:none}.elx-imgbox-dialog .pick-block .el-pagination *{background:none}.elx-imgbox-dialog .upload-block .upload-img-preview{padding:20px}.elx-imgbox-dialog .upload-block .upload-img-preview .el-upload--picture-card,.elx-imgbox-dialog .upload-block .upload-img-preview .el-upload-list--picture-card .el-upload-list__item,.elx-imgbox-dialog .upload-block .upload-img-preview .el-upload-list--picture-card .el-upload-list__item .wp{width:90px;height:90px;line-height:98px;background-size:cover;background-position:50% 50%}.elx-imgbox-dialog .upload-block .upload-img-preview .el-upload-list--picture-card .el-upload-list__item-status-label i{margin-top:12px;vertical-align:top}.elx-imgbox-dialog .upload-block .upload-tip{padding:0 20px;font-size:13px;color:#999}.elx-imgbox-dialog .upload-block .upload-title{font-size:16px;color:#666;padding:20px 0 0 20px}.el-upload-list__item-actions a i{color:#fff}',""])},function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"elx-imgbox"},[i("el-dialog",{staticClass:"elx-imgbox-dialog",attrs:{title:"图片管理器",visible:e.visible,top:"5vh"},on:{"update:visible":function(t){e.visible=t}}},[i("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.options.activeTab,callback:function(t){e.$set(e.options,"activeTab",t)},expression:"options.activeTab"}},[i("el-tab-pane",{staticClass:"pick-block",attrs:{label:"选择图片",name:"pick"}},[e.isLoading?i("div",{staticClass:"elx-img-list-loading"},[i("div",{staticClass:"el-icon-loading"})]):e._e(),e._v(" "),i("div",{staticClass:"elx-main elx-img-list"},e._l(e.imgRes.items,function(t,o){return i("div",{key:o,staticClass:"img-item",on:{click:function(i){return e.onClickListImage(t)}}},[i("div",{staticClass:"thumb-wp"},[i("img",{attrs:{src:t.thumb,alt:"img.name"}})]),e._v(" "),i("div",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),t.label?i("div",{staticClass:"label"},[e._v(e._s(t.label))]):e._e(),e._v(" "),t.selected?i("span",{staticClass:"selected"},[i("span",{staticClass:"icon el-icon-check"})]):e._e()])}),0),e._v(" "),i("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.imgRes.total},on:{"current-change":e.onPageNumChange}}),e._v(" "),i("div",{staticClass:"elx-foot"},[i("el-badge",{staticClass:"item",attrs:{value:e.images.length}},[i("el-button",{attrs:{type:"primary",size:"medium",disabled:0==e.images.length},on:{click:e.onConfirm}},[e._v("确定")])],1),e._v(" "),e.options.enableUpload?i("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(t){e.options.activeTab="upload"}}},[e._v("上传图片")]):e._e()],1)],1),e._v(" "),e.options.enableUpload?i("el-tab-pane",{staticClass:"upload-block",attrs:{label:"上传图片",name:"upload"}},[i("div",{staticClass:"elx-main"},[i("div",{staticClass:"upload-title"},[e._v("请选择本地图片上传：")]),e._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-img-preview",attrs:{"list-type":"picture-card",accept:"image/*",action:e.options.action,multiple:e.options.multiple,headers:e.options.headers,"with-credentials":e.options.withCredentials,data:e.options.withData,"auto-upload":!1,limit:e.uploadNumberLimit(),"before-upload":e.beforeUpload,"on-change":e.onUploadChange,"on-progress":e.onUploadProgress,"on-success":e.onUploadSuccess,"on-error":e.onUploadError,"on-exceed":e.onUploadExceedTip}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("div",{staticClass:"upload-tip"},[e._v(e._s(e.uploadTips()))]),e._v(" "),i("div",{staticClass:"elx-foot"},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.onUploadConfirm}},[e._v("确定上传")])],1)],1)]):e._e()],1)],1)],1)},a=[],l={render:o,staticRenderFns:a};t.a=l}]);
//# sourceMappingURL=index.js.map